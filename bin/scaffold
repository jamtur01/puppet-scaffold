#!/usr/bin/env ruby

require 'rubygems'
require 'puppet'
require 'templater'
require File.dirname(__FILE__)+'/../lib/scaffold.rb'

Puppet.parse_config

case ARGV[0]
  when 'puppet', 'node'
    dir = Puppet[:confdir]
    puts "#{dir}"
    Scaffold::Generator.run_cli(dir, 'scaffold', Scaffold::VERSION, ARGV)
  when 'module', 'class', 'define'
    dir = Puppet[:modulepath].split(':')
    Scaffold::Generator.run_cli(dir[0], 'scaffold', Scaffold::VERSION, ARGV)
  when 'function', 'type'
    dir = Puppet[:modulepath].split(':')
    Scaffold::Generator.run_cli(dir[0], 'scaffold', Scaffold::VERSION, ARGV)
end
